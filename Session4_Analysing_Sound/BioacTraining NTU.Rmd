#install.packages("tidyverse")
#install.packages("ggmap")
#install.packages("leaflet")


library(ggmap)
library(tidyverse)
library(leaflet)


gpsdata <- read_csv(file.choose())

glimpse(gpsdata)
summary(gpsdata)

unique(gpsdata$MANUAL)


gpsdata <- filter(gpsdata, MANUAL != "NOISE" & MANUAL != "NoID")
unique(gpsdata$MANUAL)


load(file = "mybasemap.Rdata")
ggmap(basemap)


ggmap(basemap) +
  geom_point(aes(x= LONG, y= LATITUDE, colour = MANUAL), data = gpsdata)



ggmap(basemap) + 
  stat_density2d(data = gpsdata, 
                 aes(x = LONG, y = LATITUDE),  alpha = 0.1,
                 bins = 10, geom = "polygon")  +
  geom_point(data = gpsdata, 
              aes(x = LONG, y = LATITUDE, colour = MANUAL), 
              size = 0.8)



ggmap(basemap) + 
  stat_density2d(data = gpsdata, 
                 aes(x = LONG, y = LATITUDE), alpha = 0.3,  
                 bins = 5, geom = "polygon")  +
  geom_point(data = gpsdata, aes(x = LONG, y = LATITUDE), size = 0.5) +
#But this time we'll 'facet' by species (using the MANUAL column)
  facet_wrap(~ MANUAL, ncol = 4) +
#And add a title
  ggtitle("Bat species distribution")

###########################
#LEAFLET


 leaflet(gpsdata)  %>% 
  addTiles() %>% 
  addCircles(~LONG, ~LATITUDE, color = 'blue') 
  
  